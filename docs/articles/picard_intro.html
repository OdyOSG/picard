<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Intro to Picard • picard</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Intro to Picard">
<meta property="og:description" content="picard">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">picard</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/picard_intro.html">Intro to Picard</a>
    </li>
    <li>
      <a href="../articles/roadmap.html">Picard Roadmap</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Intro to Picard</h1>
            
      
      
      <div class="hidden name"><code>picard_intro.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Running an OHDSI study is exciting effort that can lead to meaningful
new evidence on clinical questions across a network of study
participants who have data mapped to the OMOP CDM. However, there are a
lot of tasks to keep track to make an OHDSI study successful. We
introduce the <code>picard</code> R package, as a tool to assist in the
development and organization of an OHDSI study. The idea of the
<code>picard</code> package is inspired by the <a href="https://usethis.r-lib.org/" class="external-link"><code>usethis</code> package</a> that
is used to assist in the development workflow of novel R packages and
projects alike. Similar to the development of an R package, there are
several steps and pieces of documentation needed in an OHDSI study to
effectively run the study across the OHDSI network. By providing
functions that automate tasks and provide consistent structure to OHDSI
studies, <code>picard</code> attempts to help users develop and
communicate new OHDSI studies.</p>
</div>
<div class="section level2">
<h2 id="directory-structure">Directory Structure<a class="anchor" aria-label="anchor" href="#directory-structure"></a>
</h2>
<p>The first step towards assisting OHDSI studies is to introduce a
consistent directory structure that contains also necessary components
towards executing a study and is easy to follow. Below is a proposed
directory structure, offered by the <code>picard</code> package for
OHDSI studies.</p>
<pre><code> [01;34mC:/Users/mdlav/AppData/Local/Temp/Rtmpc9Llol/temp_libpath4a84762036c4/picard/vignette/picardDirectory [0m
+--  [01;34manalysis [0m
|   +--  [01;34mprivate [0m
|   +--  [01;34msettings [0m
|   \--  [01;34mstudyTasks [0m
+--  [01;34mcohortsToCreate [0m
|   \--  [01;34m01_target [0m
+--  [01;34mdocumentation [0m
+--  [01;34mextras [0m
+--  [01;34mlogs [0m
+--  [01;34mresults [0m
\-- _study.yml</code></pre>
<div class="section level4">
<h4 id="analysis-folder">Analysis Folder<a class="anchor" aria-label="anchor" href="#analysis-folder"></a>
</h4>
<p>The analysis folder contains files that are required for running an
OHDSI study. There are three sub-folders: <em>private</em>,
<em>settings</em> and <em>studyTasks</em>. The <em>studyTasks</em>
folder contains files needed to run the OHDSI study. These could be
several files in a pipeline (i.e. <code>01_buildCohorts.R</code>,
<code>02_buildStrata.R</code>,
<code>03_baselineCharacteristics.R</code>) or a single strategus json
file that contains details of the modules to run. Next, the
<em>settings</em> folder contains any files that provide details of the
analysis settings. For example, this folder could contain scripts that
specify the settings of an incidence analysis to run in the study.
Likewise, this folder could contain the
<code>createStrategusAnalysisSpecification.R</code> which creates the
strategus json to run the analysis. Finally, the <em>private</em> folder
contains any internal files needed to run the analysis. For example this
could include internal functions to run a study script. The
<code>picard</code> package offers functions to help develop components
of the analysis such as:</p>
<ul>
<li>
<code>makeAnalysisScript</code>: initializes an organized .R file,
pre-rendered with details about the analysis.</li>
<li>
<code>makeInternals</code>: creates a .R file used for developing
internal functions.</li>
</ul>
</div>
<div class="section level4">
<h4 id="cohorts-to-create-folder">Cohorts to Create Folder<a class="anchor" aria-label="anchor" href="#cohorts-to-create-folder"></a>
</h4>
<p>OHDSI studies revolve around generated cohort definitions used to
enumerate persons with a particular clinical occurrence (i.e. persons
prescribed ACE Inhibitors for first time). Keeping track of these cohort
definitions, is very important for a successful OHDSI study. Clinical
phenotypes often change during the development of studies, so it is very
important to keep the latest cohort definition json files organized. The
<em>cohortsToCreate</em> folder stores all the json files of cohort
definitions used in the study. They are organized in numbered folders
that are listed at the developers description. By default,
<code>picard</code> creates a starting <code>01_target</code> folder to
store the target cohort definitions of the study. <code>picard</code>
offers functions that support the organization of this folder, such
as:</p>
<ul>
<li>
<code>makeCohortFolder</code>: initializes a new folder to store
cohort definitions, i.e. a new folder for comparator cohorts</li>
<li>
<code>makeCohortDetails</code>: a markdown file that provides “plain
english” descriptions of the cohort definitions and tracks updates.</li>
</ul>
</div>
<div class="section level4">
<h4 id="documentation-folder">Documentation Folder<a class="anchor" aria-label="anchor" href="#documentation-folder"></a>
</h4>
<p>An OHDSI study consists of lots of documentation that effectively
communicate what the study is, how to run it and how to participate.
There are three key files stored in this folder:</p>
<ul>
<li>
<strong>Study Protocol</strong>: the protocol offers guidance on the
scientific methods used to conduct the study and justification for why
scientific decisions were made. <code>picard</code> auto-generates a
skeleton file via <code>makeStudyProtocol</code>.</li>
<li>
<strong>How To Run</strong>: a file is needed that provides all
technical specifications and instructions needed to run the study at a
site. This file provides information on how to download the OHDSI study,
prepare the environment for running the study, executing the study and
how to dissiminate the results to the study host. <code>picard</code>
auto-generates a skeleton file via <code>makeHowToRun</code>
</li>
<li>
<strong>Contribution Guidelines</strong>: a file is required to
communicate how others can contribute to the study. Contributions can
range from simply running the study to providing significant
development. OHDSI studies require transparency to nodes on what are the
rules and expectations for meaningful contribution to the study.
<code>picard</code> auto-generates a skeleton file via
<code>makeContribution</code>
</li>
</ul>
<p>There exist scenarios when a full-fledged protocol is not required
for a study. While a study protocol is not required by the institution
running the study, it is still good practice to provide guidance on the
scientific decision making for the study. <code>picard</code> offers a
skeleton file called the <em>Study Synopsis</em>, implemented via
<code>makeStudySynopsis</code>, that gives structure to the methods and
rationale for the study while not being as formal as a study
protocol.</p>
<p>The documentation folder may also contain other files that are
essential for communicating important aspects of the study.</p>
</div>
<div class="section level4">
<h4 id="results-folder">Results Folder<a class="anchor" aria-label="anchor" href="#results-folder"></a>
</h4>
<p>When an OHDSI study is executed, we require a location to store the
results in an organized fashion. These results can be easily zipped and
sent to the study host. <code>picard</code> initializes a
<em>results</em> folder that can be used as a target for the output. The
results folder is automatically added to the <code>.gitignore</code> so
that results are not accidentally committed to github repository of the
OHDSI study. We intend to add functions to compliment the results folder
in the future.</p>
</div>
<div class="section level4">
<h4 id="logs-folder">Logs Folder<a class="anchor" aria-label="anchor" href="#logs-folder"></a>
</h4>
<p>Running an OHDSI study is like executing a pipeline of tasks. It is
vital that we know what is going on in the pipeline, whether an error
has occurred or when an execution has taken place. Loggers are an
important part of a pipeline and likewise an OHDSI study.
<code>picard</code> offers a folder to save logs in a single location.
The log folder is is automatically added to the <code>.gitignore</code>
so that results are not accidentally committed to github repository of
the OHDSI study.</p>
</div>
<div class="section level4">
<h4 id="extras-folder">Extras Folder<a class="anchor" aria-label="anchor" href="#extras-folder"></a>
</h4>
<p>OHDSI studies sometimes contain files that are important to a study
but do not have a natural save location; the extras folder hosts these
files. A prime use for the extras folder is for scripts or files that
are ancillary to the main study. For example scripts such as
<code>KeyringSetup.R</code> are helpful for running the study but not
core to the study itself. <code>picard</code> offers functions that
support the extras folder.</p>
</div>
<div class="section level4">
<h4 id="study-yml">_study.yml<a class="anchor" aria-label="anchor" href="#study-yml"></a>
</h4>
<p>The final file initiated by <code>picard</code> is the
<code>_study.yml</code> file. This is a meta file that provides an
overview of the study. It contains information about who is the study
lead, the date the study started and the full name of the study. We plan
to expand upon this meta file as we feel quality meta data for a study
is useful for 1) automating start-up tasks and 2) providing records to
users.</p>
</div>
</div>
<div class="section level2">
<h2 id="initializing-an-ohdsi-study">Initializing an OHDSI study<a class="anchor" aria-label="anchor" href="#initializing-an-ohdsi-study"></a>
</h2>
<p>Once you have downloaded the <code>picard</code> package, you can
begin creating an OHDSI study. To do this, you can run code as shown in
the block below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">picard</span><span class="fu">::</span><span class="fu"><a href="../reference/newOhdsiStudy.html">newOhdsiStudy</a></span><span class="op">(</span></span>
<span>  projectName <span class="op">=</span> <span class="st">"my_ohdsi_study"</span>,</span>
<span>  author <span class="op">=</span> <span class="st">"Jean-Luc Picard"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"Characterization"</span>,</span>
<span>  directory <span class="op">=</span> <span class="st">"my_directory"</span>,</span>
<span>  open <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>By running this function, <code>picard</code> will initiate the
described directory structure and open an R project in a new session.
Notice that the details provided in the function will be rendered in the
<code>_study.yml</code> file. With the study initiated we can begin
developing our OHDSI study.</p>
<div class="section level3">
<h3 id="the-readme-file">The <em>README</em> file<a class="anchor" aria-label="anchor" href="#the-readme-file"></a>
</h3>
<p>For those familiar with code development, the README file is a
standard file used to introduce a describe the the project. Think of the
README as your cover page. It is the first file users see when they
navigate to the github page. All OHDSI projects require a README file,
thus <code>picard</code> provides a function (<code>makeReadMe</code>)
that initializes it.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">picard</span><span class="fu">::</span><span class="fu"><a href="../reference/makeReadMe.html">makeReadMe</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The readme file is initailized using information in the
<code>_study.yml</code> file. A typical OHDSI study readme has a section
of meta information as seen below:</p>
<ul>
<li>
<strong>Study Lead</strong>: Jean-Luc Picard</li>
<li>
<strong>Analytics Use Case</strong>: Characterization</li>
<li>
<strong>Study Start Date</strong>: 2023-05-</li>
<li>
<strong>Study End Date</strong>: 12-31-2099</li>
<li>
<strong>Study Tags</strong>: None</li>
<li>
<strong>Protocol</strong>: Unavailable</li>
<li>
<strong>Publications</strong>: Unavailable</li>
<li>
<strong>Results Explorer</strong>: Unavailable</li>
</ul>
<p>This provides all the basic information about the OHDSI study. A
future feature will be to provide linkage to the OHDSI Forums post
introducing the study to the community.</p>
<p>Next, the user will be asked to provide a description of the study
and databases used in the study. Finally, the README provides links to
important study information including the protocol, how to run and
contributions files. Users can add as much as they please to the README
file, <code>picard</code> offers suggested guidance for starting it.</p>
<p>Another feature offered by <code>picard</code> is support for svg
badges. These simple badges appear at the top of the README and provide
useful information about the study. Badges seen in OHDSI studies include
a study status badge and badges versioning the CDM and OMOP vocabulary.
<code>picard</code> will provide more support and documentation for
badges in the future.</p>
</div>
<div class="section level3">
<h3 id="the-news-file">The <em>NEWS</em> file<a class="anchor" aria-label="anchor" href="#the-news-file"></a>
</h3>
<p>Another common file in software repositories is the NEWS file. The
purpose of the NEWS file is to track changes to the software over time.
Of course, version control software such as github keeps a record of the
iterations of the study as it is developed, however it is helpful to
have a “plain english” file that explains what has happened as the study
has developed over time. NEWS files are often maintained via a <a href="https://semver.org/" class="external-link">semantic versioning</a> system. OHDSI studies
are not entirely software, however it is important to maintain order
over the development of the technical pieces of the study.
<code>picard</code> offers a simple function that initiates this file,
<code>makeNews</code>.</p>
</div>
<div class="section level3">
<h3 id="the-config-yml-file">The <em>config.yml</em> file<a class="anchor" aria-label="anchor" href="#the-config-yml-file"></a>
</h3>
<p>One of the most important inputs for an OHDSI study is the connection
details to the Database Management System (DBMS) that hosts the OMOP
data. These credentials need to be supplied in order to access the data
within the study node, to build cohorts and run the study on the CDM.
Keeping credentials secure and accessible is a difficult challenge. From
experience, we have found success maintaining credentials via the <a href="https://github.com/rstudio/config" class="external-link"><code>config</code>
package</a>. This package stores configurations to an analysis in a yml
where each set of credentials is differentiated with a block name. This
structure is particularly helpful in institutions that have access to
multiple OMOP assets and wish to iterate between connections
efficiently. Below is an example of a <code>config.yml</code> file:</p>
<pre><code># Config File for example

default:
  projectName: example

# Config block for example

example:
  databaseName: synpuf_110k
  dbms: !expr keyring::key_get('example_dbms')
  user: !expr keyring::key_get('example_user')
  password: !expr keyring::key_get('example_password')
  connectionString: !expr keyring::key_get('example_connectionString')
  cdmDatabase: !expr keyring::key_get('example_cdmDatabase')
  cdmSchema: !expr keyring::key_get('example_cdmSchema')
  vocabSchema: !expr keyring::key_get('example_vocabSchema')
  workDatabase: !expr keyring::key_get('example_workDatabase')
  workSchema: !expr keyring::key_get('example_workSchema')
  role: !expr keyring::key_get('example_role')
  cohortTable: example_synpuf_110k</code></pre>
<p>We can efficiently access credentials that are hidden behind the <a href="https://github.com/r-lib/keyring" class="external-link"><code>keyring</code></a> API.
The <code>config.yml</code> file works very similarly to the
<code>.Renviron</code> file. The advantage of using the
<code>config.yml</code> file instead of the <code>.Renviron</code> is
that can handle multiple credentials and is more portable than the
<code>.Renviron</code> file which is set to an environment. With
<code>picard</code> we provide a function that initializes this
file:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">picard</span><span class="fu">::</span><span class="fu"><a href="../reference/makeConfig.html">makeConfig</a></span><span class="op">(</span>block <span class="op">=</span> <span class="st">"example"</span>, database <span class="op">=</span> <span class="st">"synpuf_110k"</span><span class="op">)</span></span></code></pre></div>
<p>When a user creates a new <code>config.yml</code> file it is added to
<code>.gitignore</code> to ensure it is not committed to a github
repository.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Martin Lavallee.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
